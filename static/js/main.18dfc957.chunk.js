(this["webpackJsonpapp-chat"]=this["webpackJsonpapp-chat"]||[]).push([[0],{104:function(e,a,t){},155:function(e,a,t){},156:function(e,a,t){},159:function(e,a,t){},176:function(e,a,t){},177:function(e,a,t){},265:function(e,a,t){},266:function(e,a,t){},283:function(e,a,t){},299:function(e,a,t){},300:function(e){e.exports=JSON.parse("{}")},304:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(32),s=t.n(c),l=t(14),i=t(15),o=t(17),m=t(35),u=(t(155),t(97),t(156),t(25)),d=t.n(u),g=t(148),E=t(3),f=t.n(E),v=(t(159),function(e){return r.a.createElement(g.a,Object.assign({},e,{className:f()("button",e.className,{"button--large":"large"===e.size})}))});v.prototype={className:d.a.string};t(176),t(104);var _=function(e){var a=e.messages,t=(e.onToggle,e.avatar),n=(e.user,e.text,e.date);e.isMe,e.answers;return r.a.createElement("ul",null,a.map((function(e){return r.a.createElement("div",{key:e.id,className:f()("message",{"message--isme":e.isMe})},r.a.createElement("div",{className:"message__content"},r.a.createElement("div",{className:"message__avatar"},r.a.createElement("img",{src:t})),r.a.createElement("div",{className:"message__info"},r.a.createElement("div",{className:"message__bubble"},r.a.createElement("span",{className:"message__text"},e.title)),n&&r.a.createElement("span",{className:"message__date"},r.a.createElement(S,{date:n})))))})))},h=t(94),p=t(149),b=(t(177),function(e){var a=e._id,t=e.user,n=(e.date,e.isMe,e.created_at),c=e.text,s=e.setCurrentDialog;return r.a.createElement("div",{className:"dialogs"},r.a.createElement("div",{className:f()("dialogs__item",{"dialogs__item--online":t.isOnline}),onClick:s.bind(undefined,a)},r.a.createElement("div",{className:"dialogs__item-avatar"},r.a.createElement("img",{src:t.avatar})),r.a.createElement("div",{className:"dialogs__item-info"},r.a.createElement("div",{className:"dialogs__item-info-top"},r.a.createElement("b",null,t.fullname),r.a.createElement("span",null,function(e){return Object(p.a)(e)?Object(h.a)(new Date(e),"MM:mm"):Object(h.a)(new Date(e),"PP")}(n))),r.a.createElement("div",{className:"dialogs__item-info-bottom"},r.a.createElement("p",null,c)))))}),O=t(66),N=t(307),j=function(e){var a=e.date;return r.a.createElement(r.a.Fragment,null,Object(O.a)(new Date(a),Date.now(),{addSuffix:!0,locale:N.a}))};j.propTypes={date:d.a.string};var S=j,D=t(134),y=t.n(D),w=(t(265),t(48)),C=function(e){var a=e.items,t=e.userId,n=(e.onSearch,e.inputValue,e.setCurrentDialog);return r.a.createElement("div",{className:"dialogs"},r.a.createElement("div",{className:"dialogs-item"},a.length?y()(a,["created_at"],["desc"]).map((function(e){return r.a.createElement(b,Object.assign({setCurrentDialog:n,key:e._id},e,{isMe:e.user._id===t}))})):r.a.createElement(w.a,{image:w.a.PRESENTED_IMAGE_SIMPLE})))},I=t(309),T=(t(266),t(72)),A=t.n(T),M=function(e){var a=Object(n.useRef)(null);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"chat-input"},r.a.createElement("input",{ref:a,id:"title",type:"text",size:"large",placeholder:"Type your message"}),r.a.createElement("div",{className:"chat-input__actions"},r.a.createElement("button",null,r.a.createElement(I.a,{onClick:function(){e.onAdd(a.current.value),a.current.value="",setTimeout((function(){fetch("https://api.chucknorris.io/jokes/random").then((function(e){return e.json().then((function(e){return{data:e}}))})).then((function(a){return e.Add(a.data.value)}))}),2e3)}})))))},k=(t(283),t(308)),L=function(e){var a=e.onSearch,t=e.inputValue;return r.a.createElement("div",{className:"search"},r.a.createElement(k.a.Search,{placeholder:"input search text",onChange:function(e){return a(e.target.value)},value:t,allowClear:!0,enterButton:!0}))},R=t(8),x=t(73);A.a.defaults.baseURL="http://localhost:9999";var G=A.a,J=function(){return G.get("/dialogs")},P={setDialogs:function(e){return{type:"DIALOGS:SET_ITEMS",payload:e}},setCurrentDialog:function(e){return{type:"DIALOGS:SET_CURRENT_DIALOG",payload:e}},fetchDialogs:function(){return function(e){J().then((function(a){var t=a.data;e(P.setDialogs(t))}))}}},V=P,F=(t(299),Object(x.b)((function(e){return e.dialogs}),V)((function(e){var a=e.fetchDialogs,t=e.setCurrentDialog,c=e.items,s=e.userId,l=Object(n.useState)(""),i=Object(R.a)(l,2),o=i[0],m=i[1],u=Object(n.useState)(Array.from(c)),d=Object(R.a)(u,2),g=d[0],E=d[1],f=function(e){E(c.filter((function(a){return a.user.fullname.toLowerCase().indexOf(e.toLowerCase())>=0}))),m(e)};return Object(n.useEffect)((function(){c.length?E(c):a()}),[c]),r.a.createElement(r.a.Fragment,null,r.a.createElement(L,{onSearch:f,inputValue:o}),r.a.createElement("h1",{className:"title"},"Chats"),r.a.createElement(C,{userId:s,items:g,onSearch:f,inputValue:o,setCurrentDialog:t}))}))),U=(t(300),function(e){var a=e.messages,t=e.onToggle,n=e.onAdd,c=e.Add,s=e.answers;return r.a.createElement("section",{className:"home"},r.a.createElement("div",{className:"chat"},r.a.createElement("div",{className:"chat__sidebar"},r.a.createElement("div",{className:"chat__sidebar-header chat__sidebar-header--online"},r.a.createElement("div",{className:"chat__sidebar-header-avatar"},r.a.createElement("img",{src:"https://thumbs.dreamstime.com/b/male-avatar-icon-flat-style-male-user-icon-cartoon-man-avatar-vector-stock-91602735.jpg"}))),r.a.createElement("div",{className:"chat__sidebar-dialogs"},r.a.createElement(F,null))),r.a.createElement("div",{className:"chat__dialog"},r.a.createElement("div",{className:"chat__dialog-header chat__dialog-header--online"},r.a.createElement("div",{className:"chat__dialog-header-avatar"},r.a.createElement("img",{src:"https://thumbs.dreamstime.com/b/male-avatar-icon-flat-style-male-user-icon-cartoon-man-avatar-vector-stock-91602735.jpg"})),r.a.createElement("b",{className:"chat__dialog-header-fullname"},"Roman")),r.a.createElement("div",{className:"chat__dialog-message"},r.a.createElement(_,{messages:a,answers:s,onToggle:t,avatar:"https://thumbs.dreamstime.com/b/male-avatar-icon-flat-style-male-user-icon-cartoon-man-avatar-vector-stock-91602735.jpg"})),r.a.createElement("div",{className:"chat__dialog-input"},r.a.createElement(M,{onAdd:n,Add:c})))))}),z=t(95),B=function(){var e=Object(n.useState)([]),a=Object(R.a)(e,2),t=a[0],c=a[1];Object(n.useEffect)((function(){var e=JSON.parse(localStorage.getItem("messages")||"[]");c(e)}),[]),Object(n.useEffect)((function(){localStorage.setItem("messages",JSON.stringify(t))}),[t]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(U,{messages:t,onAdd:function(e){var a={title:e,id:Date.now(),isMe:!0};c((function(e){return[].concat(Object(z.a)(e),[a])}))},Add:function(e){var a={title:e,id:Date.now(),isMe:!1};c((function(e){return[].concat(Object(z.a)(e),[a])}))}}))},X=function(e){Object(o.a)(t,e);var a=Object(m.a)(t);function t(){return Object(l.a)(this,t),a.apply(this,arguments)}return Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"wrapper"},r.a.createElement(B,null))}}]),t}(r.a.Component),q=t(88),H=t(36),K=t(146),Q=t(4),W={items:[],currentDialog:null},Y=Object(H.c)({dialogs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,a=arguments.length>1?arguments[1]:void 0,t=a.type,n=a.payload;switch(t){case"DIALOGS:SET_ITEMS":return Object(Q.a)(Object(Q.a)({},e),{},{items:n});case"DIALOGS:SET_CURRENT_DIALOG":return Object(Q.a)(Object(Q.a)({},e),{},{currentDialog:n});default:return e}}}),Z=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||H.d,$=[K.a],ee=Object(H.e)(Y,Z(H.a.apply(void 0,$)));s.a.render(r.a.createElement(q.a,null,r.a.createElement(x.a,{store:ee},r.a.createElement(X,null))),document.getElementById("root"))},97:function(e,a){}},[[304,1,2]]]);
//# sourceMappingURL=main.18dfc957.chunk.js.map